<odoo>
  <data>
    <record id="seq_stock_production_lot" model="ir.sequence">
      <field name="name">mrp workorder</field>
      <field name="code">mrp.workorder</field>
      <field name="prefix">2019</field>
      <field name="padding">5</field>
      <!--      <field name="number_next">60100</field>-->
      <field name="company_id" eval="False"/>
    </record>

    <record id="mrp_workorder_view_form_tablet_inherit" model="ir.ui.view">
      <field name="name">tablet producci√≥n</field>
      <field name="model">mrp.workorder</field>
      <field name="inherit_id" ref="mrp_workorder.mrp_workorder_view_form_tablet"/>
      <field name="arch" type="xml">
        <button name="action_open_manufacturing_order" position="replace">
        </button>
         <xpath expr="//div[@class='workorder_pdf']" position="before">
          <field name="potential_serial_planned_ids" >
            <tree decoration-danger="consumed==False" decoration-success="consumed==True"
                  delete="false" create="false" editable="bottom">
              <field name="stock_production_lot_id" readonly="1"/>
              <field name="serial_number" readonly="1"/>
              <field name="display_weight" readonly="1"/>
              <field name="consumed" groups="base.group_system"/>
            </tree>
          </field>
        </xpath>
      </field>
    </record>

    <record id="mrp_production_workorder_form_view_inherit" model="ir.ui.view">
      <field name="name">formulario order de trabajo</field>
      <field name="model">mrp.workorder</field>
      <field name="inherit_id" ref="mrp.mrp_production_workorder_form_view_inherit"/>
      <field name="arch" type="xml">
        <field name="is_produced" position="after">
          <field name="production_id" />
        </field>
        <field name="final_lot_id" position="attributes">
          <attribute name="readonly">True</attribute>
        </field>
        <button name="open_tablet_view" position="attributes">
          <attribute name="string">Procesar Entrada</attribute>
        </button>
        <xpath expr="//header" position="inside">
          <button name="open_out_form_view"
                  type="object"
                  string="Procesar Salida"
                  attrs="{'invisible': [('production_state', '=', 'done')]}"
          />
        </xpath>
        <xpath expr="//page[2]" position="after">
          <page string="Lotes Planificados">
            <field name="potential_serial_planned_ids" readonly="1">
              <tree>
                <field name="stock_production_lot_id"/>
                <field name="serial_number"/>
                <field name="display_weight"/>
              </tree>
            </field>
          </page>
        </xpath>
      </field>
    </record>

    <record id="mrp_workorder_out_form_view" model="ir.ui.view">
      <field name="name">Procesar Salidas</field>
      <field name="model">mrp.workorder</field>
      <field name="priority">20</field>
      <field name="arch" type="xml">
        <form>
          <div>
            <group>
            <group>
              <h2>Salida Principal</h2>
              <field name="state" readonly="1"/>
              <field name="product_id" readonly="1"/>
              <field name="final_lot_id"
                     readonly="1"
                     attrs="{'invisible':[('state', '=', 'done')]}"
              />
              <field name="production_finished_move_line_ids"
                     attrs="{'invisible':[('state', '!=', 'done')]}"
                     readonly="1"
              >
                <tree readonly="1">
                  <field name="product_id"/>
                  <field name="lot_id" widget="many2onebutton"/>
                </tree>
              </field>
            </group>
            <group attrs="{'invisible':[('state', '=', 'done')]}">
              <h2>Otras Salidas</h2>
              <field name="byproduct_move_line_ids"
                     readonly="1">
                <tree readonly="1">
                  <field name="product_id"/>
                  <field name="lot_id" widget="many2onebutton"/>
                </tree>
              </field>
            </group>
          </group>
          </div>
          <div>
            <group>
              <field name="summary_out_serial_ids">
                <tree>
                  <field name="stock_production_lot_id" />
                  <field name="stock_product_id" />
                  <field name="serial_number" />
                  <field name="display_weight" />
                </tree>
              </field>
            </group>
          </div>
        </form>
      </field>
    </record>

    <record id="mrp_workorder_out_form_action" model="ir.actions.act_window.view">
      <field name="name">action out process</field>
      <field name="res_model">mrp.workorder</field>
      <field name="view_mode">form</field>
      <field name="view_id" ref="dimabe_manufacturing.mrp_workorder_out_form_view"/>
    </record>

  </data>
</odoo>